{% extends 'main/base.html' %}
{% load static %}
{% block title %}Edit Blog Post{% endblock %}

{% block content %}
  <h1>Edit Blog Post: "{{ post.title }}"</h1>
  <form id="blog-edit-form" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Save Changes</button>
  </form>  

  {% if post.content_doc %}
    <p>
      <a href="{{ post.content_doc.url }}" download>
        Download Word Document
      </a>
    </p>
  {% endif %}
  <p><a href="{% url 'blog_admin_panel' %}">Back to Admin Panel</a></p>
{% endblock %}

{% block extra_js %}
  {{ form.media }}
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      if (window.ClassicEditor) {
        ClassicEditor
          .create(document.querySelector('#id_content'))
          .catch(error => {
            console.error("Error initializing CKEditor 5:", error);
          });
      } else {
        console.error("ClassicEditor is not available.");
      }
    });
  </script>
{% endblock %}

